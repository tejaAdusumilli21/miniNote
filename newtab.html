<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Note</title>
  <link rel="icon" type="image/png" href="icons/icon128.png" />
  <link rel="shortcut icon" href="icons/icon128.png" />
  <link rel="apple-touch-icon" href="icons/icon128.png" />
  <meta name="theme-color" content="#2563eb" />
  <link rel="stylesheet" href="fonts.css" />
  <link rel="stylesheet" href="newtab.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header class="topbar">
    <div class="tabbar">
      <button id="sidebar-toggle" class="icon-flat" title="Toggle sidebar">‚ò∞</button>

      <div class="app-title">üìù Mini Note</div>

      <nav class="tabs" aria-label="Top tabs">
        <button class="tab top-tab active" data-tab="home">Home</button>
        <button class="tab top-tab" data-tab="insert">Insert</button>
        <button class="tab top-tab" data-tab="draw">Draw</button>
        <button class="tab top-tab" data-tab="view">View</button>
        <button class="tab top-tab" data-tab="backup">Backup</button>
      </nav>

      <div class="searchbox" title="Search pages">
        <span class="bulb">üí°</span>
        <input id="search" placeholder="Tell me what you want to do" />
        <div id="search-results" class="search-results hidden"></div>
      </div>

      <div class="supporter-container">
        <button id="supporter-btn" class="supporter-btn">
          ‚ù§Ô∏è Become a Supporter
        </button>
        <div class="supporter-tooltip">
          <div class="tooltip-title">Buy me a coffee</div>
          <div class="tooltip-content">
            <p><strong>Love what I'm building? Your support means the world!</strong></p>
            <p class="tooltip-section-title">Become a Supporter</p>
            <p>-- it helps me stay motivated, keep improving, and bring you even more awesome features.</p>
            <p>Every bit of support fuels my passion to build better, faster, and with more heart.</p>
            <p class="tooltip-thanks">Thank you! ü§ç ‚ù§Ô∏è</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Home ribbon -->
    <section class="ribbon" id="ribbon-home">
      <div class="group">
        <div class="group-row">
          <select id="font-family" class="sel" title="Font">
            <!-- System Fonts -->
            <option>Calibri Light</option>
            <option>Calibri</option>
            <option>Arial</option>
            <option>Times New Roman</option>
            <option>Verdana</option>
            <option>Georgia</option>
            <option>Consolas</option>
            
            <!-- Google Fonts - Sans Serif -->
            <option>Roboto</option>
            <option>Open Sans</option>
            <option>Lato</option>
            <option>Poppins</option>
            <option>Inter</option>
            
            <!-- Google Fonts - Serif -->
            <option>Playfair Display</option>
            <option>Merriweather</option>
            <option>IBM Plex Serif</option>
            
            <!-- Google Fonts - Monospace -->
            <option>Fira Code</option>
            <option>Inconsolata</option>
          </select>

          <select id="font-size" class="sel" title="Size">
            <option value="10">10</option>
            <option value="12">12</option>
            <option value="14">14</option>
            <option value="15" selected>15</option>
            <option value="16">16</option>
            <option value="18">18</option>
            <option value="20">20</option>
            <option value="24">24</option>
            <option value="28">28</option>
            <option value="32">32</option>
          </select>

          <button class="rb" id="fmt-bold" title="Bold"><b>B</b></button>
          <button class="rb" id="fmt-italic" title="Italic"><i>I</i></button>
          <button class="rb" id="fmt-underline" title="Underline"><u>U</u></button>

          <div class="split" title="Text color">
            <label id="fmt-color-label" class="mini" style="cursor:pointer;" title="Click to clear text color">A</label>
            <input id="fmt-color" type="color" class="color-input" value="#111827" />
            <button id="fmt-color-clear" class="rb" title="Clear text color" style="padding:4px 6px; font-size:11px;">‚úï</button>
          </div>
          <div class="split" title="Highlight">
            <label id="fmt-highlight-label" class="mini" style="cursor:pointer;" title="Click to clear highlight">üñç</label>
            <input id="fmt-highlight" type="color" class="color-input" value="#fff59d" />
            <button id="fmt-highlight-clear" class="rb" title="Clear highlight" style="padding:4px 6px; font-size:11px;">‚úï</button>
          </div>

          <div class="dropdown-wrapper" title="Bullets">
            <button class="rb" id="fmt-bullets">‚Ä¢ List ‚ñº</button>
            <div id="bullets-dropdown" class="dropdown-menu hidden">
              <button data-bullet-type="‚Ä¢">‚Ä¢ Bullet</button>
              <button data-bullet-type="‚óã">‚óã Circle</button>
              <button data-bullet-type="‚ñ†">‚ñ† Square</button>
              <button data-bullet-type="remove">Remove Bullets</button>
            </div>
          </div>

          <div class="dropdown-wrapper" title="Numbering">
            <button class="rb" id="fmt-number">1. List ‚ñº</button>
            <div id="number-dropdown" class="dropdown-menu hidden">
              <button data-number-type="1">1. 2. 3.</button>
              <button data-number-type="a">a. b. c.</button>
              <button data-number-type="i">i. ii. iii.</button>
              <button data-number-type="A">A. B. C.</button>
              <button data-number-type="I">I. II. III.</button>
              <button data-number-type="remove">Remove Numbering</button>
            </div>
          </div>

          <button class="rb" id="fmt-checkbox" title="Checkbox">‚òê</button>

          <button class="rb" id="align-left" title="Align left">‚Øá</button>
          <button class="rb" id="align-center" title="Center">‚â°</button>
          <button class="rb" id="align-right" title="Align right">‚Øà</button>
        </div>
        <div class="group-title">Font</div>
      </div>

      <div class="group">
        <div class="group-row">
          <button class="rb" id="undo" title="Undo">‚Ü∂</button>
          <button class="rb" id="redo" title="Redo">‚Ü∑</button>
          <button class="rb" id="clear-format" title="Clear formatting">Clear</button>
        </div>
        <div class="group-title">Editing</div>
      </div>
    </section>

    <!-- Insert ribbon -->
    <section class="ribbon hidden" id="ribbon-insert">
      <div class="group">
        <div class="group-row">
          <button class="rb" id="btn-insert-table">Table</button>
          <button class="rb" id="btn-insert-picture">Picture</button>
          <button class="rb" id="btn-insert-link">Link</button>
        </div>
        <div class="group-title">Insert</div>
      </div>
      <div class="group">
        <div class="group-row">
          <button class="rb" id="btn-insert-symbol">Symbol</button>
          <button class="rb" id="btn-insert-emoji">Emoji</button>
        </div>
        <div class="group-title">Symbols</div>
      </div>
    </section>

    <!-- Draw ribbon -->
    <section class="ribbon hidden" id="ribbon-draw">
      <div class="group">
        <div class="group-row">
          <button class="rb" id="tool-select">Select</button>
          <button class="rb" id="tool-pen">Pen</button>
          <button class="rb" id="tool-highlighter">Highlighter</button>
          <button class="rb" id="tool-eraser">Eraser</button>
        </div>
        <div class="group-title">Tools</div>
      </div>

      <div class="group">
        <div class="group-row">
          <button class="color-dot" data-color="#111111" title="Black"></button>
          <button class="color-dot" data-color="#2563eb" title="Blue"></button>
          <button class="color-dot" data-color="#16a34a" title="Green"></button>
          <button class="color-dot" data-color="#dc2626" title="Red"></button>

          <select id="stroke-width" class="sel" title="Stroke width">
            <option value="2">2px</option>
            <option value="4" selected>4px</option>
            <option value="8">8px</option>
            <option value="12">12px</option>
          </select>

          <button class="rb" id="toggle-ruler">Ruler</button>
          <button class="rb" id="clear-drawing">Clear</button>
        </div>
        <div class="group-title">Ink</div>
      </div>
    </section>

    <!-- View ribbon -->
    <section class="ribbon hidden" id="ribbon-view">
      <div class="group">
        <div class="group-row">
          <button class="rb" id="toggle-sidebar">Toggle sidebar</button>
        </div>
        <div class="group-title">Layout</div>
      </div>

      <div class="group">
        <div class="group-row radio-row">
          <button class="radio" data-theme="light"><span class="check">‚úì</span> Light</button>
          <button class="radio" data-theme="dark"><span class="check">‚úì</span> Dark</button>
          <button class="radio" data-theme="system"><span class="check">‚úì</span> System</button>
        </div>
        <div class="group-title">Theme</div>
      </div>
    </section>

    <!-- Backup ribbon -->
    <section class="ribbon hidden" id="ribbon-backup">
      <div class="group">
        <div class="group-row">
          <button class="rb" id="backup-export">Export</button>
          <button class="rb" id="backup-import">Import</button>
        </div>
        <div class="group-title">Backup</div>
      </div>
    </section>
  </header>

  <main class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-actions">
        <button id="add-folder">+ Collection</button>
        <button id="add-page">+ Page</button>
      </div>
      <div id="tree" class="tree"></div>
    </aside>
    <div class="sidebar-divider" id="sidebar-divider"></div>

    <section class="content">
      <div id="content-header" class="content-header">
        <div class="header-top-row">
          <div class="header-left">
            <div id="breadcrumb" class="breadcrumb"></div>
            <input id="page-title" class="title-input" placeholder="Page title" />
          </div>
          <div class="timestamps" id="page-timestamps">
            <div id="created-info" class="timestamp-line"></div>
            <div id="updated-info" class="timestamp-line"></div>
          </div>
        </div>
        <div class="header-bottom-row">
          <div class="view-tabs">
            <button class="view-btn active" data-view="note">Notepad</button>
            <button class="view-btn" data-view="todo">To-Do</button>
          </div>
          <button id="close-page-btn" class="close-page-btn" title="Close page">‚úï</button>
        </div>
      </div>

      <div id="note-view" class="view">
        <div id="editor" class="editor" contenteditable="true"></div>
        <div class="draw-layer">
          <canvas id="draw-canvas"></canvas>
          <div id="ruler" class="ruler hidden"></div>
        </div>
      </div>

      <div id="todo-view" class="view hidden">
        <div class="todo-bar">
          <button id="add-task-btn" class="btn primary">+ Add Task</button>
        </div>
        <div class="kanban-board">
          <div class="kanban-column">
            <div class="kanban-column-title">To Do <span class="kanban-column-count">(<span id="todo-count">0</span>)</span></div>
            <ul id="todo-list" class="todo-list"></ul>
          </div>
          <div class="kanban-column">
            <div class="kanban-column-title">In Progress <span class="kanban-column-count">(<span id="inprogress-count">0</span>)</span></div>
            <ul id="inprogress-list" class="todo-list"></ul>
          </div>
          <div class="kanban-column">
            <div class="kanban-column-title">Completed <span class="kanban-column-count">(<span id="completed-count">0</span>)</span></div>
            <ul id="completed-list" class="todo-list"></ul>
          </div>
        </div>
      </div>

      <!-- Welcome Screen -->
      <div id="welcome-screen" class="welcome-screen hidden">
        <div class="welcome-content">
          <div class="welcome-logo">üìù</div>
          <h1 class="welcome-title">Welcome to Mini Note</h1>
          <p class="welcome-subtitle">Your powerful note-taking companion</p>

          <div class="welcome-image">
            <img id="welcome-img-light" src="icons/welcome-light.svg" alt="Mini Note Features" class="welcome-illustration" />
            <img id="welcome-img-dark" src="icons/welcome-dark.svg" alt="Mini Note Features" class="welcome-illustration hidden" />
          </div>

          <div class="features-grid">
            <div class="feature-item">
              <div class="feature-icon">üìù</div>
              <h3 class="feature-title">Rich Text Editor</h3>
              <p class="feature-desc">Format text with bold, italic, colors, and more</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">üé®</div>
              <h3 class="feature-title">Drawing Canvas</h3>
              <p class="feature-desc">Sketch ideas with pen, highlighter, and eraser tools</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">‚úÖ</div>
              <h3 class="feature-title">Task Management</h3>
              <p class="feature-desc">Organize tasks with drag-and-drop Kanban board</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">üìÅ</div>
              <h3 class="feature-title">Collections</h3>
              <p class="feature-desc">Group related notes into folders</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">üîç</div>
              <h3 class="feature-title">Smart Search</h3>
              <p class="feature-desc">Find notes and pages instantly</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon">üíæ</div>
              <h3 class="feature-title">Auto-Save</h3>
              <p class="feature-desc">Never lose your work with automatic saving</p>
            </div>
          </div>

          <p class="welcome-footer">Create a new page or select one from the sidebar to get started</p>
        </div>
      </div>
    </section>
  </main>

  <input id="file-picker" type="file" accept="image/*" hidden />
  <input id="import-json" type="file" accept="application/json" hidden />

  <!-- Center modal (single input) -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-title" id="modal-title">Title</div>
      <div class="modal-msg" id="modal-msg"></div>

      <div class="modal-field" id="modal-field">
        <label class="modal-label" id="modal-label" for="modal-input">Name</label>
        <input id="modal-input" class="modal-input" />
      </div>

      <div class="modal-actions">
        <button id="modal-cancel" class="btn ghost">Cancel</button>
        <button id="modal-alt" class="btn danger hidden">Delete</button>
        <button id="modal-ok" class="btn primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Symbol dialog -->
  <div id="symbol-dialog" class="dialog-overlay hidden">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title">Symbol</div>
        <button class="dialog-close" data-close="symbol-dialog">‚úï</button>
      </div>
      <div class="dialog-body">
        <div id="symbol-grid" class="grid"></div>
        <div class="dialog-meta">
          <div class="meta-label">Unicode name:</div>
          <div id="symbol-name" class="meta-value"></div>
        </div>
      </div>
      <div class="dialog-footer">
        <button id="symbol-insert" class="btn primary">Insert</button>
        <button class="btn" data-close="symbol-dialog">Close</button>
      </div>
    </div>
  </div>

  <!-- Emoji dialog -->
  <div id="emoji-dialog" class="dialog-overlay hidden">
    <div class="dialog dialog-large">
      <div class="dialog-header">
        <div class="dialog-title">Emoji</div>
        <button class="dialog-close" data-close="emoji-dialog">‚úï</button>
      </div>
      <div class="dialog-body">
        <div class="emoji-tabs" id="emoji-tabs"></div>
        <div id="emoji-grid" class="grid emoji-grid"></div>
      </div>
      <div class="dialog-footer">
        <button id="emoji-insert" class="btn primary">Insert</button>
        <button class="btn" data-close="emoji-dialog">Close</button>
      </div>
    </div>
  </div>

  <!-- Table Picker Dialog -->
  <div id="table-dialog" class="dialog-overlay hidden">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title">Insert Table</div>
        <button class="dialog-close" data-close="table-dialog">‚úï</button>
      </div>
      <div class="dialog-body">
        <div class="table-picker-label">Select table size:</div>
        <div id="table-size-grid" class="table-size-grid"></div>
        <div class="table-size-display" id="table-size-display">1 √ó 1</div>
        <div class="dialog-meta">
          <label class="meta-label">
            <input type="checkbox" id="table-header-row" checked />
            Include header row
          </label>
        </div>
      </div>
      <div class="dialog-footer">
        <button id="table-insert" class="btn primary">Insert</button>
        <button class="btn" data-close="table-dialog">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Table Shading Dialog -->
  <div id="table-shading-dialog" class="dialog-overlay hidden">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title">Cell Shading</div>
        <button class="dialog-close" data-close="table-shading-dialog">‚úï</button>
      </div>
      <div class="dialog-body">
        <div id="shading-color-grid" class="shading-color-grid"></div>
      </div>
      <div class="dialog-footer">
        <button id="shading-apply" class="btn primary">Apply</button>
        <button id="shading-clear" class="btn ghost">Clear Shading</button>
        <button class="btn" data-close="table-shading-dialog">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Link Dialog -->
  <div id="link-dialog" class="dialog-overlay hidden">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title">Insert Link</div>
        <button class="dialog-close" data-close="link-dialog">‚úï</button>
      </div>
      <div class="dialog-body">
        <div class="form-group">
          <label class="form-label">URL *</label>
          <input id="link-url-input" class="form-input" type="url" placeholder="https://example.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Link Text (optional)</label>
          <input id="link-text-input" class="form-input" type="text" placeholder="Click here" />
          <div class="form-hint">Leave empty to use URL as text</div>
        </div>
      </div>
      <div class="dialog-footer">
        <button id="link-insert" class="btn primary">Insert</button>
        <button class="btn" data-close="link-dialog">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Task Modal -->
  <div id="task-modal" class="dialog-overlay hidden">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title" id="task-modal-title">Add Task</div>
        <button class="dialog-close" data-close="task-modal">‚úï</button>
      </div>
      <div class="dialog-body">
        <div class="form-group">
          <label class="form-label">Name *</label>
          <input id="task-name" class="form-input" placeholder="Task name" />
        </div>
        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea id="task-description" class="form-textarea" placeholder="Task description" rows="3"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Start Date</label>
            <input id="task-start-date" class="form-input" type="date" />
          </div>
          <div class="form-group">
            <label class="form-label">End Date</label>
            <input id="task-end-date" class="form-input" type="date" />
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Status</label>
          <select id="task-status" class="form-input">
            <option value="todo">To Do</option>
            <option value="inprogress">In Progress</option>
            <option value="completed">Completed</option>
          </select>
        </div>
      </div>
      <div class="dialog-footer">
        <button id="task-save" class="btn primary">Save</button>
        <button class="btn" data-close="task-modal">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <script src="storage.js"></script>
  <script src="draw.js"></script>
  <script src="editor.js"></script>
  <script src="newtab.js"></script>
</body>
</html>
